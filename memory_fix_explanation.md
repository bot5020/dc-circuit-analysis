# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø–∞–º—è—Ç–∏ GPU

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ `Duplicate layer name: model.layers.0.self_attn.attn` –≤–æ–∑–Ω–∏–∫–ª–∞ –∏–∑-–∑–∞:

1. **–°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è –¥–ª–∏–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: `max_seq_length=15000` —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ GPU –ø–∞–º—è—Ç–∏
2. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è GPU –ø–∞–º—è—Ç—å**: vLLM –Ω–µ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å —Å —Ç–∞–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤ vLLM**: –ü—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∏–º–µ–Ω–∞ —Å–ª–æ–µ–≤

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```python
# –î–û (–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è):
max_seq_length: int = 15000
lora_r: int = 64
lora_alpha: int = 64
batch_size: int = 4
gradient_accumulation_steps: int = 4
num_generations: int = 8
gpu_memory_utilization=0.15
max_completion_length=10000

# –ü–û–°–õ–ï (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è):
max_seq_length: int = 8192
lora_r: int = 32
lora_alpha: int = 32
batch_size: int = 2
gradient_accumulation_steps: int = 2
num_generations: int = 4
gpu_memory_utilization=0.3
max_completion_length=4096
```

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **8192 —Ç–æ–∫–µ–Ω–æ–≤** - –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á
2. **LoRA rank 32** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞, –Ω–æ —ç–∫–æ–Ω–æ–º–∏—Ç –ø–∞–º—è—Ç—å
3. **Batch size 2** - –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏ –Ω–∞ –±–∞—Ç—á
4. **4 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è GRPO, –Ω–æ –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç –ø–∞–º—è—Ç—å
5. **30% GPU –ø–∞–º—è—Ç–∏** - –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –º–æ–¥–µ–ª–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –û–±—É—á–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–º
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è
- ‚úÖ –ü–∞–º—è—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é:

1. –£–º–µ–Ω—å—à–∏—Ç–µ `max_seq_length` –¥–æ 4096
2. –£–º–µ–Ω—å—à–∏—Ç–µ `batch_size` –¥–æ 1
3. –£–º–µ–Ω—å—à–∏—Ç–µ `num_generations` –¥–æ 2
4. –£–≤–µ–ª–∏—á—å—Ç–µ `gpu_memory_utilization` –¥–æ 0.5
