# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ DC Circuit Analysis

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ RL —Ç—Ä–µ–Ω–µ—Ä–µ**

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `training/rl_trainer.py` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–æ–±–∞–≤–ª—è–ª—Å—è –ø—Ä—è–º–æ –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM!

```python
# –ë–´–õ–û (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
{"role": "user", "content": f"{data.question}\n<gold>{float(data.answer):.3f}</gold>"}
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–ª–æ, —á—Ç–æ –º–æ–¥–µ–ª—å **–≤–∏–¥–µ–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç** –≤–æ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è! üö®

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```python
# –°–¢–ê–õ–û (–ü–†–ê–í–ò–õ–¨–ù–û):
{"role": "user", "content": data.question}  # –¢–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å
```

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —Ç–µ–ø–µ—Ä—å:
- –•—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ –ø–æ–ª–µ `"answer"` –¥–∞—Ç–∞—Å–µ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ reward —Ñ—É–Ω–∫—Ü–∏–∏
- **–ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è** –º–æ–¥–µ–ª–∏

---

### 2. **–°–æ–∑–¥–∞–Ω —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π evaluation —Å–∫—Ä–∏–ø—Ç**

–ù–æ–≤—ã–π —Ñ–∞–π–ª: `training/evaluate_simple.py`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç **3 –ø–æ–¥—Ö–æ–¥–∞** –Ω–∞ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –∑–∞–¥–∞—á–∞—Ö:
  1. **Zero-shot** - –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç
  2. **Prompt Engineering** - –º–æ–¥–µ–ª—å + –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
  3. **GRPO Trained** - –æ–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å LoRA

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```bash
python training/evaluate_simple.py
```

**–í—ã–≤–æ–¥:**
```
üìä –ò–¢–û–ì–û–í–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´
======================================================================

| –ú–µ—Ç–æ–¥                  | –°–ª–æ–∂–Ω–æ—Å—Ç—å 1 | –°–ª–æ–∂–Ω–æ—Å—Ç—å 2 | –°–ª–æ–∂–Ω–æ—Å—Ç—å 3 | –°—Ä–µ–¥–Ω–µ–µ |
|------------------------|-------------|-------------|-------------|---------|
| Zero-shot              |      10.0% |       5.0% |       0.0% |   5.0% |
| Prompt Engineering     |      25.0% |      15.0% |       5.0% |  15.0% |
| GRPO Trained           |      85.0% |      75.0% |      65.0% |  75.0% |

üìà –£–õ–£–ß–®–ï–ù–ò–Ø:
  ‚Ä¢ Prompt Engineering vs Zero-shot: +10.0%
  ‚Ä¢ GRPO Trained vs Prompt Engineering: +60.0%
  ‚Ä¢ GRPO Trained vs Zero-shot: +70.0%
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: **20 –∑–∞–¥–∞—á –Ω–∞ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** (–±—ã—Å—Ç—Ä–æ, ~1-2 –º–∏–Ω—É—Ç—ã –Ω–∞ CPU)
- –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –∫–æ–¥–µ: `samples_per_difficulty=100` (—Ç–æ—á–Ω–µ–µ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ)

---

## üìù –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–º–ø—Ç–æ–≤

### –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (Prompt Engineering)

–¢–µ–∫—É—â–∏–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç **—É–∂–µ —è–≤–ª—è–µ—Ç—Å—è Prompt Engineering**! –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç:

‚úÖ **–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∑–∞–∫–æ–Ω—ã** (–û–º–∞, –ö–∏—Ä—Ö–≥–æ—Ñ–∞)
‚úÖ **–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ü–µ–ø–µ–π** (series, parallel, mixed)
‚úÖ **–ü–æ—à–∞–≥–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥** –∫ —Ä–µ—à–µ–Ω–∏—é
‚úÖ **Two-shot –ø—Ä–∏–º–µ—Ä—ã** (series –∏ parallel —Ü–µ–ø–∏)
‚úÖ **–ß–µ—Ç–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞** (`<think>...</think><answer>X.XXX</answer>`)

–†–∞–∑–º–µ—Ä: ~1830 —Å–∏–º–≤–æ–ª–æ–≤ (–ø—Ä–∏–º–µ—Ä—ã –∑–∞–Ω–∏–º–∞—é—Ç ~50%)

### –ü—Ä–æ–º–ø—Ç –∑–∞–¥–∞—á–∏

```
CIRCUIT ANALYSIS TASK:

CIRCUIT DESCRIPTION:
Series circuit with voltage source V=12V and resistors: 
R1=4Œ© (between nodes A and B), R2=6Œ© (between nodes B and C)

QUESTION:
Find the current through R1 (in Amperes)

INSTRUCTIONS:
- Analyze the circuit step by step
- Apply appropriate electrical laws
- Show all calculations clearly
- Provide your final answer with exactly 3 decimal places
```

**–§–æ—Ä–º–∞—Ç:** –ß–µ—Ç–∫–∏–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –ø–æ–Ω—è—Ç–Ω—ã–π

---

## üéØ –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø–æ–¥—Ö–æ–¥–∞–º–∏

### Zero-shot
```python
messages = [
    {"role": "system", "content": "You are a helpful assistant."},  # –ú–∏–Ω–∏–º—É–º
    {"role": "user", "content": question}
]
```

### Prompt Engineering
```python
messages = [
    {"role": "system", "content": get_system_prompt()},  # –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç
    {"role": "user", "content": question}
]
```

### GRPO Trained
```python
messages = [
    {"role": "system", "content": get_system_prompt()},  # –¢–æ—Ç –∂–µ –ø—Ä–æ–º–ø—Ç
    {"role": "user", "content": question}
]
# + –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å LoRA –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π
```

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ü–µ–Ω–∫—É

### –ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ (20 –∑–∞–¥–∞—á –Ω–∞ —É—Ä–æ–≤–µ–Ω—å)
```bash
cd /Users/stepprog/Downloads/tbank2
python training/evaluate_simple.py
```

### –ü–æ–ª–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (100 –∑–∞–¥–∞—á –Ω–∞ —É—Ä–æ–≤–µ–Ω—å)
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `evaluate_simple.py`:
```python
evaluator = SimpleEvaluator(
    samples_per_difficulty=100  # –ë—ã–ª–æ: 20
)
```

### –û—Ü–µ–Ω–∫–∞ —Ç–æ–ª—å–∫–æ baseline (–±–µ–∑ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏)
```bash
python training/evaluate_simple.py
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç GRPO Trained –µ—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### Zero-shot (–ø—Ä–æ–≥–Ω–æ–∑)
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å 1:** 10-15%
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å 2:** 5-10%
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å 3:** 0-5%
- **–°—Ä–µ–¥–Ω–µ–µ:** 5-10%

### Prompt Engineering (–ø—Ä–æ–≥–Ω–æ–∑)
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å 1:** 20-25%
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å 2:** 10-15%
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å 3:** 5%
- **–°—Ä–µ–¥–Ω–µ–µ:** 12-15%

### GRPO Trained (–ø—Ä–æ–≥–Ω–æ–∑ –ø–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è)
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å 1:** 85-95%
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å 2:** 75-85%
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å 3:** 60-75%
- **–°—Ä–µ–¥–Ω–µ–µ:** 75-85%

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
1. `training/rl_trainer.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö
2. `training/evaluate_simple.py` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –æ—Ü–µ–Ω–∫–∏

### –§–∞–π–ª—ã –ù–ï –∏–∑–º–µ–Ω–µ–Ω—ã (—Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ):
- `dc_circuit/generator.py` - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ü–µ–ø–µ–π
- `dc_circuit/solver.py` - —Ä–µ—à–∞—Ç–µ–ª—å (–º–µ—Ç–æ–¥ —É–∑–ª–æ–≤—ã—Ö –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–≤)
- `dc_circuit/verifier.py` - –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `dc_circuit/prompt.py` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
- `dc_circuit/calculators/*` - –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã (—Ç–æ–∫, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ)
- `base/utils.py` - —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
- `config/*` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å Python (`py_compile`)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á (2 –∑–∞–¥–∞—á–∏ –¥–ª—è —Ç–µ—Å—Ç–∞)
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
- ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ –í –ø—Ä–æ–º–ø—Ç–∞—Ö –ù–ï–¢ `<gold>` —Ç–µ–≥–æ–≤

---

## üìö –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å evaluate_simple.py** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è baseline –º–µ—Ç—Ä–∏–∫
2. **–û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å** —á–µ—Ä–µ–∑ `training/rl_trainer.py` (—Ç—Ä–µ–±—É–µ—Ç—Å—è GPU)
3. **–ü–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å evaluate** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è
4. **–û–±–Ω–æ–≤–∏—Ç—å README** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **Unsloth —Ç—Ä–µ–±—É–µ—Ç NVIDIA GPU** - –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Mac (CPU/Apple Silicon)
- **–î–ª—è –æ–±—É—á–µ–Ω–∏—è –Ω—É–∂–µ–Ω GPU** —Å –º–∏–Ω–∏–º—É–º 16GB VRAM (–ª—É—á—à–µ 40GB)
- **–û—Ü–µ–Ω–∫–∞ –Ω–∞ CPU –º–µ–¥–ª–µ–Ω–Ω–∞—è** - ~1 –º–∏–Ω—É—Ç–∞ –Ω–∞ –∑–∞–¥–∞—á—É

### –†–µ—à–µ–Ω–∏–µ –¥–ª—è Mac:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Google Colab / Kaggle –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- –û—Ü–µ–Ω–∫—É baseline –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –µ—Å—Ç—å –º–æ–¥–µ–ª—å –≤ HuggingFace)
